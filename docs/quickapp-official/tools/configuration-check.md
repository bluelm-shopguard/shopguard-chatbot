
# 快应用 `manifest.json` 配置文件检查规则

`manifest.json` 是快应用的配置文件，定义了应用的包名、名称、图标、路由、窗口表现等重要信息。不正确的配置可能导致编译失败或运行异常。IDE 和编译工具会自动检测 `manifest.json` 中部分字段的规则，并给出相应的提示或警告。

本文档将梳理这些核心字段的配置规则。

---

## 一、 必填字段

以下字段必须存在且不能为空，否则将导致编译错误。

-   `package`: 应用的包名，是应用的唯一标识。
-   `name`: 应用名称，将在设备桌面上显示。
-   `icon`: 应用图标的路径。
-   `versionCode`: 应用的版本号。
-   `config`: 应用的基础配置。
-   `router`: 应用的路由信息，定义了应用的页面。
-   `features`: 应用声明使用的系统能力接口。

---

## 二、 核心字段规则详解

### 基础信息

-   **`package`**
    -   **规则**: 字符串类型，必须是唯一的。
    -   **建议**: 推荐采用反向域名表示法，格式为 `com.company.module`，例如 `com.example.demo`。

-   **`name`**
    -   **规则**: 字符串类型，长度限制在 20 个字节以内。

-   **`versionName`**
    -   **规则**: 字符串类型，表示应用的版本名称。
    -   **示例**: `"1.0.0"`。

-   **`versionCode`**
    -   **规则**: 整数类型，表示应用的版本号，必须是递增的。
    -   **建议**: 每次提交新版本到应用商店时，都将 `versionCode` 的值加 1。

-   **`minPlatformVersion`**
    -   **规则**: 整数类型，指定应用运行所需的最低平台版本号。
    -   **建议**: 建议设置为 `1070` 或更高版本，以使用更丰富的新特性并避免兼容性问题，目前绝大部分机型均已覆盖此版本。

-   **`icon`**
    -   **规则**: 字符串类型，指向应用图标文件的路径。
    -   **格式要求**:
        -   图片格式：**PNG**
        -   图片尺寸：**512px * 512px**
        -   文件大小：不能超过 **1MB**

### `features` (能力接口)

-   **规则**:
    -   `features` 是一个对象数组。
    -   数组中的每一个对象都必须至少包含一个 `name` 属性，用于声明需要使用的平台能力接口。

### `config` (基础配置)

-   **`logLevel`**
    -   **规则**: 字符串类型，用于控制应用在开发调试时打印日志的等级。
    -   **可选值**: `"off"`, `"error"`, `"warn"`, `"info"`, `"log"`, `"debug"`。

-   **`designWidth`**
    -   **规则**: 整数类型，定义页面设计稿的基准宽度。框架会根据此宽度与实际设备宽度，自动缩放页面中的 `px` 单位元素，实现屏幕适配。
    -   **常用值**: `750`。

### `router` (路由配置)

-   **规则**:
    -   必须包含 `pages` 或 `widgets` 字段，且其值不能为空对象。
    -   必须有且仅有一个 `entry` 字段，其值必须是一个字符串。
    -   `entry` 字段的值必须是 `pages` 对象中定义的一个页面键名，用来指定应用的入口页面。
    -   `pages` 对象中的每一个页面配置，都必须包含一个 `component` 字段，且其值不能为空字符串，用于指定页面的组件文件路径。

### `display` (窗口及UI配置)

-   **`backgroundColor`**: 字符串类型，设置窗口的背景色。
-   **`fullScreen`**: 布尔类型 (`true` / `false`)，设置应用是否全屏显示。
-   **`titleBar`**: 布尔类型 (`true` / `false`)，设置是否显示默认的标题栏。
-   **`titleBarBackgroundColor`**: 字符串类型，设置标题栏的背景色。
-   **`titleBarTextColor`**: 字符串类型，设置标题栏的文本颜色。
-   **`titleBarText`**: 字符串类型，设置标题栏的默认文本。
-   **`menu`**: 布尔类型 (`true` / `false`)，设置是否在标题栏显示胶囊菜单按钮。
